{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"43270282-4a5d06b91258db09a976f913c\";\n\nasync function serviceSearchPhoto(seachImage = \"\", page = 1, perPage = 15) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: seachImage,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: \"true\",\n                page: page,\n                per_page: perPage\n            }\n        });\n        return response.data;\n    } catch (error) {\n        throw new Error(\"Oops! Something went wrong. Please try again later.\");\n    }\n}\n\nexport { serviceSearchPhoto };","function createMarkup(arr) {\n    return arr.map(({ id, webformatURL, tags, largeImageURL, likes, views, comments, downloads }) => `\n        <li class=\"gallery-item\" data-id=${id}>\n            <a class=\"gallery-link\" href=${largeImageURL}>\n                <img src=\"${webformatURL}\" alt=\"${tags}\">\n            </a>\n            <div class=\"gallery-word\">\n                <div class=\"gallery-opis\">\n                    <h2 class=\"title\">Likes</h2>\n                    <p class=\"count\">${likes}</p>\n                </div>\n                <div class=\"gallery-opis\">\n                    <h2 class=\"title\">Views</h2>\n                    <p class=\"count\">${views}</p>\n                </div>\n                <div class=\"gallery-opis\">\n                    <h2 class=\"title\">Comments</h2>\n                    <p class=\"count\">${comments}</p>\n                </div>\n                <div class=\"gallery-opis\">\n                    <h2 class=\"title\">Downloads</h2>\n                    <p class=\"count\">${downloads}</p>\n                </div>\n            </div>\n        </li>\n    `).join(\"\");\n}\n\nexport { createMarkup };","import axios from 'axios';\nimport { serviceSearchPhoto } from './js/pixabay-api.js'; \nimport { createMarkup } from './js/render-functions.js'; \nimport iziToast from \"izitoast\";   \nimport \"izitoast/dist/css/iziToast.min.css\"; \nimport SimpleLightbox from \"simplelightbox\"; \nimport \"simplelightbox/dist/simple-lightbox.min.css\"; \n\nconst searchForm = document.querySelector(\".js-search-form\");\nconst list = document.querySelector(\".js-list\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\nloader.style.display = 'none';\n\nlet currentPage = 1;\nlet searchQuery = '';\n\nsearchForm.addEventListener(\"submit\", handleSubmit);\nloadMoreBtn.addEventListener(\"click\", handleLoadMore);\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    const { searchImage } = event.currentTarget.elements;\n    searchQuery = searchImage.value.trim();\n\n    if (!searchQuery) {\n        showErrorMessage(\"Please enter a search query!\");\n        return;\n    }\n\n    currentPage = 1;\n    loader.style.display = 'block';\n    list.innerHTML = ''; \n\n    try {\n        const data = await serviceSearchPhoto(searchQuery, currentPage);\n        handleSearchResults(data);\n    } catch (error) {\n        showErrorToast(error.message);\n    }\n}\n\nasync function handleLoadMore() {\n    currentPage += 1;\n    loader.style.display = 'block';\n    \n    try {\n        const data = await serviceSearchPhoto(searchQuery, currentPage);\n        handleSearchResults(data);\n        smoothScrollToNextGroup(); \n    } catch (error) {\n        showErrorToast(error.message);\n    }\n}\n\nfunction handleSearchResults(data) {\n    loader.style.display = 'none';\n\n    if (data.hits.length === 0) {\n        showErrorMessage(\"Sorry, there are no images matching your search query. Please try again!\");\n    } else {\n        renderImages(data.hits);\n        initializeLightbox();\n        if (data.totalHits <= currentPage * 15) {\n            loadMoreBtn.style.display = 'none';\n            showInfoMessage(\"We're sorry, but you've reached the end of search results.\");\n        } else {\n            loadMoreBtn.style.display = 'block';\n        }\n        searchForm.reset();\n    }\n}\n\nfunction renderImages(images) {\n    list.insertAdjacentHTML(\"beforeend\", createMarkup(images));\n}\n\nfunction initializeLightbox() {\n    const lightBox = new SimpleLightbox('.js-list a', {\n        captions: true,\n        captionsData: 'alt',\n        captionPosition: 'bottom', \n    });\n    lightBox.refresh();\n}\n\nfunction showErrorToast(message) {\n    iziToast.error({\n        title: 'Error',\n        titleColor: 'white',\n        backgroundColor: '#EF4040',\n        messageColor: '#FFFFFF',\n        message: message,\n        position: 'topRight',\n    });\n}\n\nfunction showInfoMessage(message) {\n    iziToast.info({\n        title: 'Info',\n        titleColor: 'white',\n        backgroundColor: '#4E75FF',\n        messageColor: '#FFFFFF',\n        message: message,\n        position: 'topRight',\n    });\n}\n\n\nfunction smoothScrollToNextGroup() {\n    const firstGalleryItem = document.querySelector('.js-list a');\n\n    if (!firstGalleryItem) {\n        return;\n    }\n\n    const galleryItemHeight = firstGalleryItem.getBoundingClientRect().height;\n    const scrollToHeight = galleryItemHeight * 2;\n\n    window.scrollBy({\n        top: scrollToHeight,\n        behavior: 'smooth'\n    });\n}"],"names":["BASE_URL","API_KEY","serviceSearchPhoto","seachImage","page","perPage","axios","createMarkup","arr","id","webformatURL","tags","largeImageURL","likes","views","comments","downloads","searchForm","list","loader","loadMoreBtn","currentPage","searchQuery","handleSubmit","handleLoadMore","event","searchImage","data","handleSearchResults","error","showErrorToast","smoothScrollToNextGroup","renderImages","initializeLightbox","showInfoMessage","images","SimpleLightbox","message","iziToast","firstGalleryItem","scrollToHeight"],"mappings":"owBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAEhB,eAAeC,EAAmBC,EAAa,GAAIC,EAAO,EAAGC,EAAU,GAAI,CACvE,GAAI,CAYA,OAXiB,MAAMC,EAAM,IAAIN,EAAU,CACvC,OAAQ,CACJ,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAUC,CACb,CACb,CAAS,GACe,IACnB,MAAe,CACZ,MAAM,IAAI,MAAM,qDAAqD,CACxE,CACL,CCtBA,SAASE,EAAaC,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CAAE,GAAAC,EAAI,aAAAC,EAAc,KAAAC,EAAM,cAAAC,EAAe,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA,2CAC1DP,CAAE;AAAA,2CACFG,CAAa;AAAA,4BAC5BF,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,uCAKfE,CAAK;AAAA;AAAA;AAAA;AAAA,uCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,uCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,uCAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,KAI3C,EAAE,KAAK,EAAE,CACd,CClBA,MAAMC,EAAa,SAAS,cAAc,iBAAiB,EACrDC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAC3DD,EAAO,MAAM,QAAU,OAEvB,IAAIE,EAAc,EACdC,EAAc,GAElBL,EAAW,iBAAiB,SAAUM,CAAY,EAClDH,EAAY,iBAAiB,QAASI,CAAc,EAEpD,eAAeD,EAAaE,EAAO,CAC/BA,EAAM,eAAc,EACpB,KAAM,CAAE,YAAAC,CAAa,EAAGD,EAAM,cAAc,SAG5C,GAFAH,EAAcI,EAAY,MAAM,OAE5B,CAACJ,EAAa,CACd,iBAAiB,8BAA8B,EAC/C,MACH,CAEDD,EAAc,EACdF,EAAO,MAAM,QAAU,QACvBD,EAAK,UAAY,GAEjB,GAAI,CACA,MAAMS,EAAO,MAAMzB,EAAmBoB,EAAaD,CAAW,EAC9DO,EAAoBD,CAAI,CAC3B,OAAQE,EAAO,CACZC,EAAeD,EAAM,OAAO,CAC/B,CACL,CAEA,eAAeL,GAAiB,CAC5BH,GAAe,EACfF,EAAO,MAAM,QAAU,QAEvB,GAAI,CACA,MAAMQ,EAAO,MAAMzB,EAAmBoB,EAAaD,CAAW,EAC9DO,EAAoBD,CAAI,EACxBI,GACH,OAAQF,EAAO,CACZC,EAAeD,EAAM,OAAO,CAC/B,CACL,CAEA,SAASD,EAAoBD,EAAM,CAC/BR,EAAO,MAAM,QAAU,OAEnBQ,EAAK,KAAK,SAAW,EACrB,iBAAiB,0EAA0E,GAE3FK,EAAaL,EAAK,IAAI,EACtBM,IACIN,EAAK,WAAaN,EAAc,IAChCD,EAAY,MAAM,QAAU,OAC5Bc,EAAgB,4DAA4D,GAE5Ed,EAAY,MAAM,QAAU,QAEhCH,EAAW,MAAK,EAExB,CAEA,SAASe,EAAaG,EAAQ,CAC1BjB,EAAK,mBAAmB,YAAaX,EAAa4B,CAAM,CAAC,CAC7D,CAEA,SAASF,GAAqB,CACT,IAAIG,EAAe,aAAc,CAC9C,SAAU,GACV,aAAc,MACd,gBAAiB,QACzB,CAAK,EACQ,QAAO,CACpB,CAEA,SAASN,EAAeO,EAAS,CAC7BC,EAAS,MAAM,CACX,MAAO,QACP,WAAY,QACZ,gBAAiB,UACjB,aAAc,UACd,QAASD,EACT,SAAU,UAClB,CAAK,CACL,CAEA,SAASH,EAAgBG,EAAS,CAC9BC,EAAS,KAAK,CACV,MAAO,OACP,WAAY,QACZ,gBAAiB,UACjB,aAAc,UACd,QAASD,EACT,SAAU,UAClB,CAAK,CACL,CAGA,SAASN,GAA0B,CAC/B,MAAMQ,EAAmB,SAAS,cAAc,YAAY,EAE5D,GAAI,CAACA,EACD,OAIJ,MAAMC,EADoBD,EAAiB,sBAAqB,EAAG,OACxB,EAE3C,OAAO,SAAS,CACZ,IAAKC,EACL,SAAU,QAClB,CAAK,CACL"}